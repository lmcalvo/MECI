mortalidad.km_COX_completo$p
mortalidad.km_COX_completo$y
mortalidad.km_COX_completo$xlevels
mortalidad.km_COX_completo$contrasts
mortalidad.km_COX_completo$wald.test
mortalidad.km_COX_completo$score
mortalidad.km_COX_completo$loglik
mortalidad.km_COX_completo$iter
mortalidad.km_COX_completo$linear.predictors
mortalidad.km_COX_completo$method
mortalidad.km_COX_completo$n
mortalidad.km_COX_completo$coefficients
mortalidad.km_COX_completo$terms
mortalidad.km_COX_completo$concordance
mortalidad.km_COX_completo <- coxph(mortalidad.superv ~ causa + Sexo, data = datos_mortalidad)
mortalidad.km_COX_completo
riesgo <- cox.zph(mortalidad.km_COX_completo)
riesgo
mortalidad <- read.csv2("todas_las_causas.csv",skip = 1,header=T)
total<-as.numeric(as.character(mortalidad$Total[1]))
rownames(mortalidad)<-mortalidad[,1] ; mortalidad<-mortalidad[,-1] ;
mortalidad<-mortalidad[,-1] ; mortalidad<-mortalidad[-1,]
datos_mortalidad<-matrix(nrow = total, ncol=4); colnames(datos_mortalidad)<-c("Sexo","t_superv","muerte","causa","pre72horas")
mortalidad <- read.csv2("todas_las_causas.csv",skip = 1,header=T)
total<-as.numeric(as.character(mortalidad$Total[1]))
rownames(mortalidad)<-mortalidad[,1] ; mortalidad<-mortalidad[,-1] ;
mortalidad<-mortalidad[,-1] ; mortalidad<-mortalidad[-1,]
datos_mortalidad<-matrix(nrow = total, ncol=5); colnames(datos_mortalidad)<-c("Sexo","t_superv","muerte","causa","pre72horas")
ficheros <- 3
cont<-1
for(fichero in 1:ficheros){
fichero_datos <- paste("fichero_datos_",as.character(fichero),".csv",sep = "")
datos <- read.csv2(fichero_datos,skip = 1,header=T)
rownames(datos)<-datos[,1] ; datos<-datos[,-1] ; datos<-datos[,-1] ; datos<-datos[-1,]
for(i in 1:length(datos$Menos.de.24.horas)){
for(j in 1:length(datos)){
if(as.numeric(as.character(datos[i,j]))!= 0){
for(k in 1:as.numeric(as.character(datos[i,j]))){
datos_mortalidad[cont,1]<-rownames(datos)[i]
datos_mortalidad[cont,2]<-j*24 # Discretizo el tiempo
if(j*24 <=72){datos_mortalidad[cont,5]<-1}
else{datos_mortalidad[cont,5]<-0}
datos_mortalidad[cont,3]<-1
datos_mortalidad[cont,4]<-fichero
cont<-cont+1
}
}
}
}
}
datos_mortalidad<-as.data.frame(datos_mortalidad,stringsAsFactors=F)
datos_mortalidad$t_superv<-as.double(datos_mortalidad$t_superv)
datos_mortalidad$muerte<-as.double(datos_mortalidad$muerte)
datos_mortalidad$Sexo<-as.factor(datos_mortalidad$Sexo)
datos_mortalidad$causa[datos_mortalidad$causa == 1] <- "Perinatal"
datos_mortalidad$causa[datos_mortalidad$causa == 2] <- "Malformaciones"
datos_mortalidad$causa[datos_mortalidad$causa == 3] <- "Enfermedades recién nacido"
mortalidad.superv <- Surv(datos_mortalidad$t_superv,datos_mortalidad$muerte)
View(datos_mortalidad)
mortalidad <- read.csv2("todas_las_causas.csv",skip = 1,header=T)
total<-as.numeric(as.character(mortalidad$Total[1]))
rownames(mortalidad)<-mortalidad[,1] ; mortalidad<-mortalidad[,-1] ;
mortalidad<-mortalidad[,-1] ; mortalidad<-mortalidad[-1,]
datos_mortalidad<-matrix(nrow = total, ncol=5); colnames(datos_mortalidad)<-c("Sexo","t_superv","muerte","causa","pre72horas")
ficheros <- 3
cont<-1
for(fichero in 1:ficheros){
fichero_datos <- paste("fichero_datos_",as.character(fichero),".csv",sep = "")
datos <- read.csv2(fichero_datos,skip = 1,header=T)
rownames(datos)<-datos[,1] ; datos<-datos[,-1] ; datos<-datos[,-1] ; datos<-datos[-1,]
for(i in 1:length(datos$Menos.de.24.horas)){
for(j in 1:length(datos)){
if(as.numeric(as.character(datos[i,j]))!= 0){
for(k in 1:as.numeric(as.character(datos[i,j]))){
datos_mortalidad[cont,1]<-rownames(datos)[i]
datos_mortalidad[cont,2]<-j*24 # Discretizo el tiempo
if(j*24 <=72){datos_mortalidad[cont,5]<-1}
else{datos_mortalidad[cont,5]<-0}
datos_mortalidad[cont,3]<-1
datos_mortalidad[cont,4]<-fichero
cont<-cont+1
}
}
}
}
}
datos_mortalidad<-as.data.frame(datos_mortalidad,stringsAsFactors=F)
datos_mortalidad$t_superv<-as.double(datos_mortalidad$t_superv)
datos_mortalidad$muerte<-as.double(datos_mortalidad$muerte)
datos_mortalidad$Sexo<-as.factor(datos_mortalidad$Sexo)
datos_mortalidad$causa[datos_mortalidad$causa == 1] <- "Perinatal"
datos_mortalidad$causa[datos_mortalidad$causa == 2] <- "Malformaciones"
datos_mortalidad$causa[datos_mortalidad$causa == 3] <- "Enfermedades recién nacido"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 1] <- "pre72horas"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 0] <- "post72horas"
mortalidad.superv <- Surv(datos_mortalidad$t_superv,datos_mortalidad$muerte)
View(datos_mortalidad_t_aleatorio)
View(datos_mortalidad)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv ~ causa + pre72, data = datos_mortalidad, type = "kaplan-meier")
View(datos_mortalidad)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv ~ causa + pre72horas, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km_causa,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia")
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
knitr::opts_chunk$set(echo = TRUE)
library(survival)
library(KMsurv)
library(survMisc)
library(survminer)
library(ggfortify)
library(flexsurv)
library(actuar)
library(dplyr)
mortalidad <- read.csv2("todas_las_causas.csv",skip = 1,header=T)
total<-as.numeric(as.character(mortalidad$Total[1]))
rownames(mortalidad)<-mortalidad[,1] ; mortalidad<-mortalidad[,-1] ;
mortalidad<-mortalidad[,-1] ; mortalidad<-mortalidad[-1,]
datos_mortalidad<-matrix(nrow = total, ncol=5); colnames(datos_mortalidad)<-c("Sexo","t_superv","muerte","causa","pre72horas")
ficheros <- 3
cont<-1
for(fichero in 1:ficheros){
fichero_datos <- paste("fichero_datos_",as.character(fichero),".csv",sep = "")
datos <- read.csv2(fichero_datos,skip = 1,header=T)
rownames(datos)<-datos[,1] ; datos<-datos[,-1] ; datos<-datos[,-1] ; datos<-datos[-1,]
for(i in 1:length(datos$Menos.de.24.horas)){
for(j in 1:length(datos)){
if(as.numeric(as.character(datos[i,j]))!= 0){
for(k in 1:as.numeric(as.character(datos[i,j]))){
datos_mortalidad[cont,1]<-rownames(datos)[i]
datos_mortalidad[cont,2]<-j*24 # Discretizo el tiempo
if(j*24 <=72){datos_mortalidad[cont,5]<-1}
else{datos_mortalidad[cont,5]<-0}
datos_mortalidad[cont,3]<-1
datos_mortalidad[cont,4]<-fichero
cont<-cont+1
}
}
}
}
}
datos_mortalidad<-as.data.frame(datos_mortalidad,stringsAsFactors=F)
datos_mortalidad$t_superv<-as.double(datos_mortalidad$t_superv)
datos_mortalidad$muerte<-as.double(datos_mortalidad$muerte)
datos_mortalidad$Sexo<-as.factor(datos_mortalidad$Sexo)
datos_mortalidad$causa[datos_mortalidad$causa == 1] <- "Perinatal"
datos_mortalidad$causa[datos_mortalidad$causa == 2] <- "Malformaciones"
datos_mortalidad$causa[datos_mortalidad$causa == 3] <- "Enfermedades recién nacido"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 1] <- "pre72horas"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 0] <- "post72horas"
mortalidad.superv <- Surv(datos_mortalidad$t_superv,datos_mortalidad$muerte)
mortalidad.km <- survfit(mortalidad.superv ~ 1, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km,print.rmean=T)
ggsurvplot(fit = mortalidad.km, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia")
ggsurvplot(mortalidad.km, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
mortalidad.km_sexo <- survfit(mortalidad.superv ~ Sexo, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km_sexo,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Sexo",
legend.labs = c("Hombres", "Mujeres"))
ggsurvplot(mortalidad.km_sexo, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Sexo",
legend.labs = c("Hombres", "Mujeres"))
mortalidad.km_causa <- survfit(mortalidad.superv ~ causa, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km_causa,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
ggsurvplot(mortalidad.km_causa, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
datos_mortalidad_t_aleatorio <- datos_mortalidad
for(i in 1:length(datos_mortalidad_t_aleatorio$t_superv)){
inferior = datos_mortalidad_t_aleatorio$t_superv[i]-24
superior = datos_mortalidad_t_aleatorio$t_superv[i]
datos_mortalidad_t_aleatorio$t_superv[i] <- round(runif(1,min=inferior,max=superior),digits = 1)
}
plot(x=datos_mortalidad_t_aleatorio$t_superv,y=1:490,xlab = "Tiempo de supervivencia",ylab = "N observavción")
mortalidad.superv_rdm_sexo <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_aleatorio_sexo <- survfit(mortalidad.superv_rdm_sexo ~ Sexo, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_aleatorio_sexo,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_aleatorio_sexo, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia", xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Sexo:",
legend.labs = c("Hombre", "Mujer"))
ggsurvplot(mortalidad.km_causa_aleatorio_sexo, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Sexo:",
legend.labs = c("Hombre", "Mujer"))
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_aleatorio <- survfit(mortalidad.superv_rdm ~ causa, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_aleatorio,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_aleatorio, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
ggsurvplot(mortalidad.km_causa_aleatorio, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo + pre72horas, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia")
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo + pre72horas, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia", font.legend=c(5),legend = c(0.2, 0.75))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
knitr::opts_chunk$set(echo = TRUE)
library(survival)
library(KMsurv)
library(survMisc)
library(survminer)
library(ggfortify)
library(flexsurv)
library(actuar)
library(dplyr)
mortalidad <- read.csv2("todas_las_causas.csv",skip = 1,header=T)
total<-as.numeric(as.character(mortalidad$Total[1]))
rownames(mortalidad)<-mortalidad[,1] ; mortalidad<-mortalidad[,-1] ;
mortalidad<-mortalidad[,-1] ; mortalidad<-mortalidad[-1,]
datos_mortalidad<-matrix(nrow = total, ncol=5); colnames(datos_mortalidad)<-c("Sexo","t_superv","muerte","causa","pre72horas")
ficheros <- 3
cont<-1
for(fichero in 1:ficheros){
fichero_datos <- paste("fichero_datos_",as.character(fichero),".csv",sep = "")
datos <- read.csv2(fichero_datos,skip = 1,header=T)
rownames(datos)<-datos[,1] ; datos<-datos[,-1] ; datos<-datos[,-1] ; datos<-datos[-1,]
for(i in 1:length(datos$Menos.de.24.horas)){
for(j in 1:length(datos)){
if(as.numeric(as.character(datos[i,j]))!= 0){
for(k in 1:as.numeric(as.character(datos[i,j]))){
datos_mortalidad[cont,1]<-rownames(datos)[i]
datos_mortalidad[cont,2]<-j*24 # Discretizo el tiempo
if(j*24 <=72){datos_mortalidad[cont,5]<-1}
else{datos_mortalidad[cont,5]<-0}
datos_mortalidad[cont,3]<-1
datos_mortalidad[cont,4]<-fichero
cont<-cont+1
}
}
}
}
}
datos_mortalidad<-as.data.frame(datos_mortalidad,stringsAsFactors=F)
datos_mortalidad$t_superv<-as.double(datos_mortalidad$t_superv)
datos_mortalidad$muerte<-as.double(datos_mortalidad$muerte)
datos_mortalidad$Sexo<-as.factor(datos_mortalidad$Sexo)
datos_mortalidad$causa[datos_mortalidad$causa == 1] <- "Perinatal"
datos_mortalidad$causa[datos_mortalidad$causa == 2] <- "Malformaciones"
datos_mortalidad$causa[datos_mortalidad$causa == 3] <- "Enfermedades recién nacido"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 1] <- "YES"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 0] <- "NO"
mortalidad.superv <- Surv(datos_mortalidad$t_superv,datos_mortalidad$muerte)
mortalidad.km <- survfit(mortalidad.superv ~ 1, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km,print.rmean=T)
ggsurvplot(fit = mortalidad.km, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia")
ggsurvplot(mortalidad.km, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
mortalidad.km_sexo <- survfit(mortalidad.superv ~ Sexo, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km_sexo,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Sexo",
legend.labs = c("Hombres", "Mujeres"))
ggsurvplot(mortalidad.km_sexo, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Sexo",
legend.labs = c("Hombres", "Mujeres"))
mortalidad.km_causa <- survfit(mortalidad.superv ~ causa, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km_causa,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
ggsurvplot(mortalidad.km_causa, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
datos_mortalidad_t_aleatorio <- datos_mortalidad
for(i in 1:length(datos_mortalidad_t_aleatorio$t_superv)){
inferior = datos_mortalidad_t_aleatorio$t_superv[i]-24
superior = datos_mortalidad_t_aleatorio$t_superv[i]
datos_mortalidad_t_aleatorio$t_superv[i] <- round(runif(1,min=inferior,max=superior),digits = 1)
}
plot(x=datos_mortalidad_t_aleatorio$t_superv,y=1:490,xlab = "Tiempo de supervivencia",ylab = "N observavción")
mortalidad.superv_rdm_sexo <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_aleatorio_sexo <- survfit(mortalidad.superv_rdm_sexo ~ Sexo, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_aleatorio_sexo,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_aleatorio_sexo, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia", xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Sexo:",
legend.labs = c("Hombre", "Mujer"))
ggsurvplot(mortalidad.km_causa_aleatorio_sexo, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Sexo:",
legend.labs = c("Hombre", "Mujer"))
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_aleatorio <- survfit(mortalidad.superv_rdm ~ causa, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_aleatorio,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_aleatorio, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
ggsurvplot(mortalidad.km_causa_aleatorio, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo + pre72horas, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm ~ causa + pre72horas, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
survdiff(mortalidad.superv_rdm~causa+pre72horas)
survdiff(mortalidad.superv_rdm~causa+pre72horas,data=datos_mortalidad_t_aleatorio)
survdiff(mortalidad.superv_rdm~causa,data=datos_mortalidad_t_aleatorio)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm ~ causa + pre72horas, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
survdiff(mortalidad.superv_rdm~causa,data=datos_mortalidad_t_aleatorio)
survdiff(mortalidad.superv_rdm~causa+pre72horas,data=datos_mortalidad_t_aleatorio)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm ~ causa + pre72horas, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
survdiff(mortalidad.superv_rdm~causa+pre72horas,data=datos_mortalidad_t_aleatorio)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm ~ causa + pre72horas, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
survdiff(mortalidad.superv_rdm~causa,data=datos_mortalidad_t_aleatorio)
View(datos)
View(mortalidad)
summary(datos_mortalidad)
datos_mortalidad$causa
factor(datos_mortalidad$causa)
summary(factor(datos_mortalidad$causa))
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo, data = datos_mortalidad_t_aleatorio[datos_mortalidad$pre72horas=1], type = "kaplan-meier")
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo, data = datos_mortalidad_t_aleatorio[datos_mortalidad$pre72horas==1], type = "kaplan-meier")
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo, data = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas==1], type = "kaplan-meier")
datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas==1]
datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES"]
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 1]
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == "YES"]
datos_mortalidad[datos_mortalidad$pre72horas == "YES"]
datos_mortalidad_t_aleatorio$pre72horas[datos_mortalidad_t_aleatorio$pre72horas=="YES"]
datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo, data = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",], type = "kaplan-meier")
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]$t_superv,datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]$muerte)
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm ~ Sexo, data = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",], type = "kaplan-meier")
print(mortalidad.km_sexo_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm_72 ~ Sexo, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_sexo_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo_pre72, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm_72 ~ Sexo, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_sexo_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo_pre72, data = datos_mortalidad_t_aleatorio_pre_72, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_sexo_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm_72 ~ causa, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio_pre_72, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado",font.legend=c(5),legend = c(0.2, 0.75))
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm_72 ~ Sexo, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_sexo_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo_pre72, data = datos_mortalidad_t_aleatorio_pre_72, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5), legend = c(0.9, 0.8))
ggsurvplot(mortalidad.km_sexo_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T, ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm_72 ~ Sexo, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_sexo_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo_pre72, data = datos_mortalidad_t_aleatorio_pre_72, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia")
ggsurvplot(mortalidad.km_sexo_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T, ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm_72 ~ causa, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio_pre_72, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
survdiff(mortalidad.superv_rdm_72~sexo)
survdiff(mortalidad.superv_rdm_72~Sexo)
survdiff(mortalidad.superv_rdm_72~Sexo,data = datos_mortalidad_t_aleatorio_pre_72)
survdiff(mortalidad.superv_rdm_72~causa,data = datos_mortalidad_t_aleatorio_pre_72)
survdiff(mortalidad.superv_rdm~causa,data = datos_mortalidad_t_aleatorio)
View(datos_mortalidad_t_aleatorio)
survdiff(mortalidad.superv_rdm~causa,data = datos_mortalidad_t_aleatorio)
knitr::opts_chunk$set(echo = TRUE)
library(survival)
library(KMsurv)
library(survMisc)
library(survminer)
library(ggfortify)
library(flexsurv)
library(actuar)
library(dplyr)
mortalidad <- read.csv2("todas_las_causas.csv",skip = 1,header=T)
total<-as.numeric(as.character(mortalidad$Total[1]))
rownames(mortalidad)<-mortalidad[,1] ; mortalidad<-mortalidad[,-1] ;
mortalidad<-mortalidad[,-1] ; mortalidad<-mortalidad[-1,]
datos_mortalidad<-matrix(nrow = total, ncol=5); colnames(datos_mortalidad)<-c("Sexo","t_superv","muerte","causa","pre72horas")
ficheros <- 3
cont<-1
for(fichero in 1:ficheros){
fichero_datos <- paste("fichero_datos_",as.character(fichero),".csv",sep = "")
datos <- read.csv2(fichero_datos,skip = 1,header=T)
rownames(datos)<-datos[,1] ; datos<-datos[,-1] ; datos<-datos[,-1] ; datos<-datos[-1,]
for(i in 1:length(datos$Menos.de.24.horas)){
for(j in 1:length(datos)){
if(as.numeric(as.character(datos[i,j]))!= 0){
for(k in 1:as.numeric(as.character(datos[i,j]))){
datos_mortalidad[cont,1]<-rownames(datos)[i]
datos_mortalidad[cont,2]<-j*24 # Discretizo el tiempo
if(j*24 <=72){datos_mortalidad[cont,5]<-1}
else{datos_mortalidad[cont,5]<-0}
datos_mortalidad[cont,3]<-1
datos_mortalidad[cont,4]<-fichero
cont<-cont+1
}
}
}
}
}
datos_mortalidad<-as.data.frame(datos_mortalidad,stringsAsFactors=F)
datos_mortalidad$t_superv<-as.double(datos_mortalidad$t_superv)
datos_mortalidad$muerte<-as.double(datos_mortalidad$muerte)
datos_mortalidad$Sexo<-as.factor(datos_mortalidad$Sexo)
datos_mortalidad$causa[datos_mortalidad$causa == 1] <- "Perinatal"
datos_mortalidad$causa[datos_mortalidad$causa == 2] <- "Malformaciones"
datos_mortalidad$causa[datos_mortalidad$causa == 3] <- "Enfermedades recién nacido"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 1] <- "YES"
datos_mortalidad$pre72horas[datos_mortalidad$pre72horas == 0] <- "NO"
mortalidad.superv <- Surv(datos_mortalidad$t_superv,datos_mortalidad$muerte)
mortalidad.km <- survfit(mortalidad.superv ~ 1, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km,print.rmean=T)
ggsurvplot(fit = mortalidad.km, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia")
ggsurvplot(mortalidad.km, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
mortalidad.km_sexo <- survfit(mortalidad.superv ~ Sexo, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km_sexo,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Sexo",
legend.labs = c("Hombres", "Mujeres"))
ggsurvplot(mortalidad.km_sexo, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Sexo",
legend.labs = c("Hombres", "Mujeres"))
mortalidad.km_causa <- survfit(mortalidad.superv ~ causa, data = datos_mortalidad, type = "kaplan-meier")
print(mortalidad.km_causa,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa, data = datos_mortalidad, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
ggsurvplot(mortalidad.km_causa, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
datos_mortalidad_t_aleatorio <- datos_mortalidad
for(i in 1:length(datos_mortalidad_t_aleatorio$t_superv)){
inferior = datos_mortalidad_t_aleatorio$t_superv[i]-24
superior = datos_mortalidad_t_aleatorio$t_superv[i]
datos_mortalidad_t_aleatorio$t_superv[i] <- round(runif(1,min=inferior,max=superior),digits = 1)
}
plot(x=datos_mortalidad_t_aleatorio$t_superv,y=1:490,xlab = "Tiempo de supervivencia",ylab = "N observavción")
mortalidad.superv_rdm_sexo <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_aleatorio_sexo <- survfit(mortalidad.superv_rdm_sexo ~ Sexo, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_aleatorio_sexo,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_aleatorio_sexo, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia", xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Sexo:",
legend.labs = c("Hombre", "Mujer"))
ggsurvplot(mortalidad.km_causa_aleatorio_sexo, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Sexo:",
legend.labs = c("Hombre", "Mujer"))
mortalidad.superv_rdm <- Surv(datos_mortalidad_t_aleatorio$t_superv,datos_mortalidad_t_aleatorio$muerte)
mortalidad.km_causa_aleatorio <- survfit(mortalidad.superv_rdm ~ causa, data = datos_mortalidad_t_aleatorio, type = "kaplan-meier")
print(mortalidad.km_causa_aleatorio,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_aleatorio, data = datos_mortalidad_t_aleatorio, title = "Curva de Supervivencia",
xlab = "Tiempo", ylab = "Probabilidad de supervivencia", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
ggsurvplot(mortalidad.km_causa_aleatorio, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado", legend.title = "Causa:",
legend.labs = c("Enfermedades recién nacido" ,"Malformaciones","Perinatal"))
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_sexo_pre72 <- survfit(mortalidad.superv_rdm_72 ~ Sexo, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_sexo_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_sexo_pre72, data = datos_mortalidad_t_aleatorio_pre_72, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia")
ggsurvplot(mortalidad.km_sexo_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T, ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
# Contraste log rank para los grupos de hombres
survdiff(mortalidad.superv_rdm_72~Sexo,data = datos_mortalidad_t_aleatorio_pre_72)
datos_mortalidad_t_aleatorio_pre_72 = datos_mortalidad_t_aleatorio[datos_mortalidad_t_aleatorio$pre72horas=="YES",]
mortalidad.superv_rdm_72 <- Surv(datos_mortalidad_t_aleatorio_pre_72$t_superv,datos_mortalidad_t_aleatorio_pre_72$muerte)
mortalidad.km_causa_pre72 <- survfit(mortalidad.superv_rdm_72 ~ causa, data = datos_mortalidad_t_aleatorio_pre_72, type = "kaplan-meier")
print(mortalidad.km_causa_pre72,print.rmean=T)
ggsurvplot(fit = mortalidad.km_causa_pre72, data = datos_mortalidad_t_aleatorio_pre_72, title = "Curva de Supervivencia",xlab = "Tiempo", ylab = "Probabilidad de supervivencia",font.legend=c(5))
ggsurvplot(mortalidad.km_causa_pre72, fun = "cumhaz", xlab = "Tiempo", censor = T,
ylab = "Riesgo Acumulado", title = "Riesgo Acumulado")
survdiff(mortalidad.superv_rdm~causa,data = datos_mortalidad_t_aleatorio)
survdiff(mortalidad.superv_rdm_72~causa,data = datos_mortalidad_t_aleatorio_pre_72)
